# Applying Themes

## Installing Admin LTE for Laravel

If there's a feature you want, there's probably someone else who already did the work for you. In this case, AdminLTE integration was already handled by jeroennoten. We'll be reusing his solution by following his guide by [clicking here](https://github.com/jeroennoten/Laravel-AdminLTE)

In summary though, just install and setup with:


```bash
composer require jeroennoten/laravel-adminlte

php artisan vendor:publish --provider="JeroenNoten\LaravelAdminLte\ServiceProvider" --tag=assets

php artisan vendor:publish --provider="JeroenNoten\LaravelAdminLte\ServiceProvider" --tag=config

```

Then update the matching fields to:

```php
'title' => 'Purchasing',

'logo' => '<b>GG</b>Purchasing',

'logo_mini' => '<b>GG</b>',

'dashboard_url' => '/',

'menu' => [
    'Purchase Order',
    [
        'text'  => 'Listing',
        'url'   => 'po',
        'icon'  => 'list',
    ],
    [
        'text'  => 'Create',
        'url'   => 'po/create',
        'icon'  => 'plus',
    ],       
],
```

Apply the theme by updating the views' layout and applying titles to each:

```php
@extends('adminlte::page')
```

Also, in the `index.blade.php`, we want to optimize the location of scripts so we put it inside the `js` section instead of content:

```javascript
@section('js')
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function () {
    initializeEvents();
});

function initializeEvents() {
    const deleteActions = document.querySelector('[action=delete-po]')

    if (deleteActions) {
        deleteActions.addEventListener('click', function(el) {
            const poId = this.getAttribute('data-id');
            deletePurchaseOrderWithId(poId);
        });
    }
}

function deletePurchaseOrderWithId(poId) {
    const url = `/po/${poId}`;
    axios.delete(url)
        .then((response) => {
            console.log(response);
            window.location.reload();
        });
}
</script>
@endsection
```

Add in a title for the index and view page:

Index:
```php
@section('title', 'Purchase Orders | Listing')
```

View:
```php
@section('title', 'Purchase Orders | View')
```

And in the form, we'll want to make it dynamic since it's shared so we'll do:

```php
@section('title', "Purchase Orders | {$title}")
```

Notice that we're using single curly braces, this is because the string in the `@section` is executed as plain php, not blade.
Finally, we add in the `$title` variable values in our controller methods, `create` and `edit`:

```php
public function create()
{
    return view('po.form', [
        'po'        => new PurchaseOrder(),
        'action'    => route('po.store'),
        'method'    => 'POST',
        'title'     => 'Create'
    ]);
}

public function edit($id)
{
    $po = PurchaseOrder::findOrFail($id);
    return view('po.form', [
        'po'        => $po,
        'action'    => route('po.update', $id),
        'method'    => 'PUT',
        'title'     => 'Edit'
    ]);
}
```

Now run your tests again, you should notice that there is an error in your test where it waited for 5 seconds but the page did not refresh when a purchase order is being deleted. This is because we used AdminLTE and the template is not actually loading our own scripts (`public/js/app.js` and `public/css/app.css` generated by `npm run dev` earlier). 

To insert our own scripts globally, we'll have to customize AdminLTE's views, to do that, we first publish the views with:

```bash
php artisan vendor:publish --provider="JeroenNoten\LaravelAdminLte\ServiceProvider" --tag=views
```

This should move the views from the `/vendor/jeroennoten/laravel-adminlte/resources/views` to `/resources/views/vendor/adminlte`. There, we can find the `page` view and add in the scripts we need.

In the `adminlte_js` section, we add the import:

```html
<script src="{{asset('js/app.js')}}"></script>
```

So it should now look something like:

```html
@section('adminlte_js')
    <script src="{{ asset('vendor/adminlte/dist/js/adminlte.min.js') }}"></script>
    <script src="{{asset('js/app.js')}}"></script>
    @stack('js')
    @yield('js')
@stop
```

Now try running your tests again, and then you should see everything go back to green.